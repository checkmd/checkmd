// Generated by CoffeeScript 1.6.2
(function() {
  require.config({
    baseUrl: "static/backbone",
    paths: {
      underscore: 'components/lodash/lodash',
      jquery: 'components/jquery/jquery',
      backbone: 'components/backbone/backbone',
      backbone_tastypie: 'components/backbone-tastypie/backbone-tastypie',
      text: 'components/text/text',
      handlebars: 'components/handlebars/handlebars',
      "backbone-forms": "components/backbone-forms/distribution.amd/backbone-forms",
      bb_forms_list: "components/backbone-forms/distribution.amd/editors/list",
      bb_forms_inline: "components/backbone-forms/distribution.amd/editors/inlinenestedmodel"
    },
    shim: {
      backbone: {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
      },
      backbone_tastypie: {
        deps: ['backbone'],
        exports: 'Backbone'
      },
      bb_forms_inline: {
        deps: ['backbone', 'backbone-forms']
      },
      underscore: {
        exports: '_'
      },
      handlebars: {
        exports: "Handlebars"
      }
    }
  });

  require(['app', 'backbone_tastypie'], function(App, Backbone) {
    App.initialize();
    return $(document).on("click", "a:not([data-bypass])", function(e) {
      var href, root;

      href = {
        prop: $(this).prop("href"),
        attr: $(this).attr("href")
      };
      root = "" + location.protocol + "//" + location.host + App.root;
      if (href.prop && href.prop.slice(0, root.length) === root) {
        e.preventDefault();
        return Backbone.history.navigate(href.attr, true);
      }
    });
  });

}).call(this);
